@namespace ToSic.Cre8magic.Theme.Basic
@using ToSic.Cre8magic.Theme.Basic.Settings
@using ToSic.Cre8magic.Theme.Basic.Utils
@using static ToSic.Cre8magic.Theme.Basic.ThemeConstants
@inherits ThemeBase
@inject OqtaneSettings OqtaneSettings

@code {
    /// <summary>
    /// Specify what layout variant to use. Will set an attribute on the wrapping div, so the CSS can adjust accordingly.
    /// </summary>
    [Parameter]
    public string Variant { get; set; } = "default";

    public override string Name => "Default";

    public override string Panes => PaneNames.Default + ",Header";

    private SettingsReader _settings = new();

    protected override void OnParametersSet()
        => RazorUtils.RunAndIgnoreErrors(() => _settings = OqtaneSettings.GetPage(PageState));
}

@* Add custom Css rules if provided in the page/site settings *@
@if (_settings.TryGet(ThemeInfo.KeyThemeCss, out var themeCss)) {
    <style>
        @((MarkupString)themeCss)
    </style>
}

<div data-bs-theme ="default-theme" data-theme-variant="@Variant">
    @* FYI: data-bs-theme is for colors/fonts; data-theme-variant is for sizing etc. *@
    <nav id="theme-page-navigation" class="navbar navbar-dark bg-primary sticky-top">
        <Logo /><Menu Orientation="Horizontal" />
        <div class="controls ms-auto">
            <div class="controls-group">
                <UserProfile ShowRegister="@_settings.Bool(ThemeInfo.KeyRegister, true)" />
                <Login ShowLogin="@_settings.Bool(ThemeInfo.KeyLogin, true)"  />
                <ControlPanel ButtonClass="btn-outline-light" />
            </div>
        </div>
    </nav>

    <div id="theme-page-header-pane" class="container-xxl px-0">
        <Pane Name="Header" />
    </div>

    <main role="main" id="theme-page-main">
        <Pane Name="@PaneNames.Default" />
    </main>

    <footer id="theme-page-footer" class="footer">
        @((MarkupString)_settings.Get(ThemeInfo.KeyFooterHtml, ThemeInfo.DefaultFooterHtml))
    </footer>

</div>
